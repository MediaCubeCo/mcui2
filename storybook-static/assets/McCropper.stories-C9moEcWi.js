import{f as wn}from"./index-CERzeK2C.js";import{p as ya,r as xn,w as ba,q as wa,v as xa,P as Ca,u as Ma}from"./vue.esm-bundler-DcuF_pQ3.js";import{g as Da}from"./_commonjsHelpers-Cpj98o6Y.js";import"./index-DZLKizrv.js";var _n={exports:{}};(function(J,ni){(function(U,tt){J.exports=tt()})(self,function(){return(()=>{var U={d:(t,e)=>{for(var i in e)U.o(e,i)&&!U.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}};U.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),U.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),U.r=t=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var tt={};function Nt(t,e){const i=Object.create(null),n=t.split(",");for(let a=0;a<n.length;a++)i[n[a]]=!0;return a=>!!i[a]}U.r(tt),U.d(tt,{Version:()=>ga,default:()=>ma,v3Cropper:()=>fn});const Tt=Nt("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt");function Rt(t){if(k(t)){const e={};for(let i=0;i<t.length;i++){const n=t[i],a=Rt(dt(n)?Kt(n):n);if(a)for(const r in a)e[r]=a[r]}return e}if(q(t))return t}const me=/;(?![^(]*\))/g,ve=/:(.+)/;function Kt(t){const e={};return t.split(me).forEach(i=>{if(i){const n=i.split(ve);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function Y(t){let e="";if(dt(t))e=t;else if(k(t))for(let i=0;i<t.length;i++){const n=Y(t[i]);n&&(e+=n+" ")}else if(q(t))for(const i in t)t[i]&&(e+=i+" ");return e.trim()}const R={},et=()=>{},ye=/^on[^a-z]/,Sn=t=>ye.test(t),pt=Object.assign,kn=Object.prototype.hasOwnProperty,S=(t,e)=>kn.call(t,e),k=Array.isArray,Wt=t=>we(t)==="[object Map]",F=t=>typeof t=="function",dt=t=>typeof t=="string",be=t=>typeof t=="symbol",q=t=>t!==null&&typeof t=="object",On=Object.prototype.toString,we=t=>On.call(t),xe=t=>dt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ce=(t,e)=>t!==e&&(t==t||e==e),Me=new WeakMap,jt=[];let ft;const gt=Symbol(""),De=Symbol("");function En(t,e=R){(function(n){return n&&n._isEffect===!0})(t)&&(t=t.raw);const i=function(n,a){const r=function(){if(!r.active)return a.scheduler?void 0:n();if(!jt.includes(r)){ai(r);try{return _e.push(wt),wt=!0,jt.push(r),ft=r,n()}finally{jt.pop(),ri(),ft=jt[jt.length-1]}}};return r.id=Tn++,r.allowRecurse=!!a.allowRecurse,r._isEffect=!0,r.active=!0,r.raw=n,r.deps=[],r.options=a,r}(t,e);return e.lazy||i(),i}function Nn(t){t.active&&(ai(t),t.options.onStop&&t.options.onStop(),t.active=!1)}let Tn=0;function ai(t){const{deps:e}=t;if(e.length){for(let i=0;i<e.length;i++)e[i].delete(t);e.length=0}}let wt=!0;const _e=[];function Rn(){_e.push(wt),wt=!1}function ri(){const t=_e.pop();wt=t===void 0||t}function X(t,e,i){if(!wt||ft===void 0)return;let n=Me.get(t);n||Me.set(t,n=new Map);let a=n.get(i);a||n.set(i,a=new Set),a.has(ft)||(a.add(ft),ft.deps.push(a))}function it(t,e,i,n,a,r){const o=Me.get(t);if(!o)return;const h=new Set,c=s=>{s&&s.forEach(l=>{(l!==ft||l.allowRecurse)&&h.add(l)})};if(e==="clear")o.forEach(c);else if(i==="length"&&k(t))o.forEach((s,l)=>{(l==="length"||l>=n)&&c(s)});else switch(i!==void 0&&c(o.get(i)),e){case"add":k(t)?xe(i)&&c(o.get("length")):(c(o.get(gt)),Wt(t)&&c(o.get(De)));break;case"delete":k(t)||(c(o.get(gt)),Wt(t)&&c(o.get(De)));break;case"set":Wt(t)&&c(o.get(gt))}h.forEach(s=>{s.options.scheduler?s.options.scheduler(s):s()})}const Wn=Nt("__proto__,__v_isRef,__isVue"),oi=new Set(Object.getOwnPropertyNames(Symbol).map(t=>Symbol[t]).filter(be)),jn=Zt(),zn=Zt(!1,!0),Hn=Zt(!0),In=Zt(!0,!0),Qt={};function Zt(t=!1,e=!1){return function(i,n,a){if(n==="__v_isReactive")return!t;if(n==="__v_isReadonly")return t;if(n==="__v_raw"&&a===(t?e?Yn:wi:e?$n:bi).get(i))return i;const r=k(i);if(!t&&r&&S(Qt,n))return Reflect.get(Qt,n,a);const o=Reflect.get(i,n,a);return(be(n)?oi.has(n):Wn(n))?o:(t||X(i,0,n),e?o:mt(o)?r&&xe(n)?o:o.value:q(o)?t?Ci(o):xi(o):o)}}function si(t=!1){return function(e,i,n,a){let r=e[i];if(!t&&(n=B(n),r=B(r),!k(e)&&mt(r)&&!mt(n)))return r.value=n,!0;const o=k(e)&&xe(i)?Number(i)<e.length:S(e,i),h=Reflect.set(e,i,n,a);return e===B(a)&&(o?Ce(n,r)&&it(e,"set",i,n):it(e,"add",i,n)),h}}["includes","indexOf","lastIndexOf"].forEach(t=>{const e=Array.prototype[t];Qt[t]=function(...i){const n=B(this);for(let r=0,o=this.length;r<o;r++)X(n,0,r+"");const a=e.apply(n,i);return a===-1||a===!1?e.apply(n,i.map(B)):a}}),["push","pop","shift","unshift","splice"].forEach(t=>{const e=Array.prototype[t];Qt[t]=function(...i){Rn();const n=e.apply(this,i);return ri(),n}});const hi={get:jn,set:si(),deleteProperty:function(t,e){const i=S(t,e),n=(t[e],Reflect.deleteProperty(t,e));return n&&i&&it(t,"delete",e,void 0),n},has:function(t,e){const i=Reflect.has(t,e);return be(e)&&oi.has(e)||X(t,0,e),i},ownKeys:function(t){return X(t,0,k(t)?"length":gt),Reflect.ownKeys(t)}},ci={get:Hn,set:(t,e)=>!0,deleteProperty:(t,e)=>!0},Be=(pt({},hi,{get:zn,set:si(!0)}),pt({},ci,{get:In}),t=>q(t)?xi(t):t),Se=t=>q(t)?Ci(t):t,ke=t=>t,Gt=t=>Reflect.getPrototypeOf(t);function Jt(t,e,i=!1,n=!1){const a=B(t=t.__v_raw),r=B(e);e!==r&&!i&&X(a,0,e),!i&&X(a,0,r);const{has:o}=Gt(a),h=n?ke:i?Se:Be;return o.call(a,e)?h(t.get(e)):o.call(a,r)?h(t.get(r)):void 0}function te(t,e=!1){const i=this.__v_raw,n=B(i),a=B(t);return t!==a&&!e&&X(n,0,t),!e&&X(n,0,a),t===a?i.has(t):i.has(t)||i.has(a)}function ee(t,e=!1){return t=t.__v_raw,!e&&X(B(t),0,gt),Reflect.get(t,"size",t)}function li(t){t=B(t);const e=B(this);return Gt(e).has.call(e,t)||(e.add(t),it(e,"add",t,t)),this}function ui(t,e){e=B(e);const i=B(this),{has:n,get:a}=Gt(i);let r=n.call(i,t);r||(t=B(t),r=n.call(i,t));const o=a.call(i,t);return i.set(t,e),r?Ce(e,o)&&it(i,"set",t,e):it(i,"add",t,e),this}function pi(t){const e=B(this),{has:i,get:n}=Gt(e);let a=i.call(e,t);a||(t=B(t),a=i.call(e,t)),n&&n.call(e,t);const r=e.delete(t);return a&&it(e,"delete",t,void 0),r}function di(){const t=B(this),e=t.size!==0,i=t.clear();return e&&it(t,"clear",void 0,void 0),i}function ie(t,e){return function(i,n){const a=this,r=a.__v_raw,o=B(r),h=e?ke:t?Se:Be;return!t&&X(o,0,gt),r.forEach((c,s)=>i.call(n,h(c),h(s),a))}}function ne(t,e,i){return function(...n){const a=this.__v_raw,r=B(a),o=Wt(r),h=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,s=a[t](...n),l=i?ke:e?Se:Be;return!e&&X(r,0,c?De:gt),{next(){const{value:u,done:p}=s.next();return p?{value:u,done:p}:{value:h?[l(u[0]),l(u[1])]:l(u),done:p}},[Symbol.iterator](){return this}}}}function nt(t){return function(...e){return t!=="delete"&&this}}const fi={get(t){return Jt(this,t)},get size(){return ee(this)},has:te,add:li,set:ui,delete:pi,clear:di,forEach:ie(!1,!1)},gi={get(t){return Jt(this,t,!1,!0)},get size(){return ee(this)},has:te,add:li,set:ui,delete:pi,clear:di,forEach:ie(!1,!0)},mi={get(t){return Jt(this,t,!0)},get size(){return ee(this,!0)},has(t){return te.call(this,t,!0)},add:nt("add"),set:nt("set"),delete:nt("delete"),clear:nt("clear"),forEach:ie(!0,!1)},vi={get(t){return Jt(this,t,!0,!0)},get size(){return ee(this,!0)},has(t){return te.call(this,t,!0)},add:nt("add"),set:nt("set"),delete:nt("delete"),clear:nt("clear"),forEach:ie(!0,!0)};function yi(t,e){const i=e?t?vi:gi:t?mi:fi;return(n,a,r)=>a==="__v_isReactive"?!t:a==="__v_isReadonly"?t:a==="__v_raw"?n:Reflect.get(S(i,a)&&a in n?i:n,a,r)}["keys","values","entries",Symbol.iterator].forEach(t=>{fi[t]=ne(t,!1,!1),mi[t]=ne(t,!0,!1),gi[t]=ne(t,!1,!0),vi[t]=ne(t,!0,!0)});const An={get:yi(!1,!1)},Ln={get:yi(!0,!1)},bi=new WeakMap,$n=new WeakMap,wi=new WeakMap,Yn=new WeakMap;function xi(t){return t&&t.__v_isReadonly?t:Mi(t,!1,hi,An,bi)}function Ci(t){return Mi(t,!0,ci,Ln,wi)}function Mi(t,e,i,n,a){if(!q(t)||t.__v_raw&&(!e||!t.__v_isReactive))return t;const r=a.get(t);if(r)return r;const o=(h=t).__v_skip||!Object.isExtensible(h)?0:function(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((s=>we(s).slice(8,-1))(h));var h;if(o===0)return t;const c=new Proxy(t,o===2?n:i);return a.set(t,c),c}function ae(t){return Di(t)?ae(t.__v_raw):!(!t||!t.__v_isReactive)}function Di(t){return!(!t||!t.__v_isReadonly)}function _i(t){return ae(t)||Di(t)}function B(t){return t&&B(t.__v_raw)||t}function mt(t){return!!(t&&t.__v_isRef===!0)}function xt(t,e,i,n){let a;try{a=n?t(...n):t()}catch(r){Bi(r,e,i)}return a}function Oe(t,e,i,n){if(F(t)){const o=xt(t,e,i,n);return o&&q(a=o)&&F(a.then)&&F(a.catch)&&o.catch(h=>{Bi(h,e,i)}),o}var a;const r=[];for(let o=0;o<t.length;o++)r.push(Oe(t[o],e,i,n));return r}function Bi(t,e,i,n=!0){if(e&&e.vnode,e){let a=e.parent;const r=e.proxy,o=i;for(;a;){const c=a.ec;if(c){for(let s=0;s<c.length;s++)if(c[s](t,r,o)===!1)return}a=a.parent}const h=e.appContext.config.errorHandler;if(h)return void xt(h,null,10,[t,r,o])}(function(a,r,o,h=!0){console.error(a)})(t,0,0,n)}let re=!1,Ee=!1;const V=[];let at=0;const oe=[];let zt=null,Ct=0;const Ht=[];let rt=null,Mt=0;const Si=Promise.resolve();let Ne=null,Te=null;function Xn(t){const e=Ne||Si;return t?e.then(this?t.bind(this):t):e}function ki(){re||Ee||(Ee=!0,Ne=Si.then(Ni))}function Oi(t,e,i,n){k(t)?i.push(...t):e&&e.includes(t,t.allowRecurse?n+1:n)||i.push(t),ki()}function Ei(t,e=null){if(oe.length){for(Te=e,zt=[...new Set(oe)],oe.length=0,Ct=0;Ct<zt.length;Ct++)zt[Ct]();zt=null,Ct=0,Te=null,Ei(t,e)}}const Dt=t=>t.id==null?1/0:t.id;function Ni(t){Ee=!1,re=!0,Ei(t),V.sort((e,i)=>Dt(e)-Dt(i));try{for(at=0;at<V.length;at++){const e=V[at];e&&xt(e,null,14)}}finally{at=0,V.length=0,function(e){if(Ht.length){const i=[...new Set(Ht)];if(Ht.length=0,rt)return void rt.push(...i);for(rt=i,rt.sort((n,a)=>Dt(n)-Dt(a)),Mt=0;Mt<rt.length;Mt++)rt[Mt]();rt=null,Mt=0}}(),re=!1,Ne=null,(V.length||Ht.length)&&Ni(t)}}let Pn=0;const Ti=t=>Pn+=t;let Re=null;function We(t){return F(t)&&(t=t()),k(t)&&(t=function(e){let i;for(let n=0;n<e.length;n++){const a=e[n];if(!se(a))return;if(a.type!==je||a.children==="v-if"){if(i)return;i=a}}return i}(t)),Ai(t)}const Ri={};function Un(t,e,{immediate:i,deep:n,flush:a,onTrack:r,onTrigger:o}=R,h=Yi){let c,s,l=!1;if(mt(t)?(c=()=>t.value,l=!!t._shallow):ae(t)?(c=()=>t,n=!0):c=k(t)?()=>t.map(f=>mt(f)?f.value:ae(f)?_t(f):F(f)?xt(f,h,2,[h&&h.proxy]):void 0):F(t)?e?()=>xt(t,h,2,[h&&h.proxy]):()=>{if(!h||!h.isUnmounted)return s&&s(),Oe(t,h,3,[u])}:et,e&&n){const f=c;c=()=>_t(f())}let u=f=>{s=m.options.onStop=()=>{xt(f,h,4)}},p=k(t)?[]:Ri;const g=()=>{if(m.active)if(e){const f=m();(n||l||Ce(f,p))&&(s&&s(),Oe(e,h,3,[f,p===Ri?void 0:p,u]),p=f)}else m()};let v;g.allowRecurse=!!e,v=a==="sync"?g:a==="post"?()=>Wi(g,h&&h.suspense):()=>{!h||h.isMounted?function(f){Oi(f,zt,oe,Ct)}(g):g()};const m=En(c,{lazy:!0,onTrack:r,onTrigger:o,scheduler:v});return function(f,b=Yi){b&&(b.effects||(b.effects=[])).push(f)}(m,h),e?i?g():p=m():a==="post"?Wi(m,h&&h.suspense):m(),()=>{Nn(m),h&&((f,b)=>{const D=f.indexOf(b);D>-1&&f.splice(D,1)})(h.effects,m)}}function Fn(t,e,i){const n=this.proxy;return Un(dt(t)?()=>n[t]:t.bind(n),e.bind(n),i,this)}function _t(t,e=new Set){if(!q(t)||e.has(t))return t;if(e.add(t),mt(t))_t(t.value,e);else if(k(t))for(let i=0;i<t.length;i++)_t(t[i],e);else if(we(t)==="[object Set]"||Wt(t))t.forEach(i=>{_t(i,e)});else for(const i in t)_t(t[i],e);return t}const Wi=function(t,e){e&&e.pendingBranch?k(t)?e.effects.push(...t):e.effects.push(t):Oi(t,rt,Ht,Mt)},qn=Symbol(),ji=Symbol(void 0),zi=Symbol(void 0),je=Symbol(void 0);function se(t){return!!t&&t.__v_isVNode===!0}const Hi="__vInternal",Ii=({key:t})=>t??null,he=({ref:t})=>t!=null?dt(t)||mt(t)||F(t)?{i:Re,r:t}:t:null,ot=function(t,e=null,i=null,n=0,a=null,r=!1){if(t&&t!==qn||(t=je),se(t)){const s=ce(t,e,!0);return i&&ze(s,i),s}if(o=t,F(o)&&"__vccOpts"in o&&(t=t.__vccOpts),e){(_i(e)||Hi in e)&&(e=pt({},e));let{class:s,style:l}=e;s&&!dt(s)&&(e.class=Y(s)),q(l)&&(_i(l)&&!k(l)&&(l=pt({},l)),e.style=Rt(l))}var o;const h=dt(t)?1:(s=>s.__isSuspense)(t)?128:(s=>s.__isTeleport)(t)?64:q(t)?4:F(t)?2:0,c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ii(e),ref:e&&he(e),scopeId:null,slotScopeIds:null,children:null,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:h,patchFlag:n,dynamicProps:a,dynamicChildren:null,appContext:null};if(ze(c,i),128&h){const{content:s,fallback:l}=function(u){const{shapeFlag:p,children:g}=u;let v,m;return 32&p?(v=We(g.default),m=We(g.fallback)):(v=We(g),m=Ai(null)),{content:v,fallback:m}}(c);c.ssContent=s,c.ssFallback=l}return c};function ce(t,e,i=!1){const{props:n,ref:a,patchFlag:r,children:o}=t,h=e?function(...c){const s=pt({},c[0]);for(let l=1;l<c.length;l++){const u=c[l];for(const p in u)if(p==="class")s.class!==u.class&&(s.class=Y([s.class,u.class]));else if(p==="style")s.style=Rt([s.style,u.style]);else if(Sn(p)){const g=s[p],v=u[p];g!==v&&(s[p]=g?[].concat(g,u[p]):v)}else p!==""&&(s[p]=u[p])}return s}(n||{},e):n;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:h,key:h&&Ii(h),ref:e&&e.ref?i&&a?k(a)?a.concat(he(e)):[a,he(e)]:he(e):a,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ji?r===-1?16:16|r:r,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ce(t.ssContent),ssFallback:t.ssFallback&&ce(t.ssFallback),el:t.el,anchor:t.anchor}}function Vn(t=" ",e=0){return ot(zi,null,t,e)}function Ai(t){return t==null||typeof t=="boolean"?ot(je):k(t)?ot(ji,null,t):typeof t=="object"?t.el===null?t:ce(t):ot(zi,null,String(t))}function ze(t,e){let i=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(k(e))i=16;else if(typeof e=="object"){if(1&n||64&n){const a=e.default;return void(a&&(a._c&&Ti(1),ze(t,a()),a._c&&Ti(-1)))}i=32,!e._&&!(Hi in e)&&(e._ctx=Re)}else F(e)?(e={default:e,_ctx:Re},i=32):(e=String(e),64&n?(i=16,e=[Vn(e)]):i=8);t.children=e,t.shapeFlag|=i}function le(t,e,i){const n=i.appContext.config.optionMergeStrategies,{mixins:a,extends:r}=e;r&&le(t,r,i),a&&a.forEach(o=>le(t,o,i));for(const o in e)n&&S(n,o)?t[o]=n[o](t[o],e[o],i.proxy,o):t[o]=e[o]}const He=t=>t?4&t.vnode.shapeFlag?t.exposed?t.exposed:t.proxy:He(t.parent):null,Li=pt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>He(t.parent),$root:t=>He(t.root),$emit:t=>t.emit,$options:t=>function(e){const i=e.type,{__merged:n,mixins:a,extends:r}=i;if(n)return n;const o=e.appContext.mixins;if(!o.length&&!a&&!r)return i;const h={};return o.forEach(c=>le(h,c,e)),le(h,i,e),i.__merged=h}(t),$forceUpdate:t=>()=>function(e){if(!(V.length&&V.includes(e,re&&e.allowRecurse?at+1:at)||e===Te)){const i=function(n){let a=at+1,r=V.length;const o=Dt(n);for(;a<r;){const h=a+r>>>1;Dt(V[h])<o?a=h+1:r=h}return a}(e);i>-1?V.splice(i,0,e):V.push(e),ki()}}(t.update),$nextTick:t=>Xn.bind(t.proxy),$watch:t=>Fn.bind(t)}),$i={get({_:t},e){const{ctx:i,setupState:n,data:a,props:r,accessCache:o,type:h,appContext:c}=t;if(e==="__v_skip")return!0;let s;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 0:return n[e];case 1:return a[e];case 3:return i[e];case 2:return r[e]}else{if(n!==R&&S(n,e))return o[e]=0,n[e];if(a!==R&&S(a,e))return o[e]=1,a[e];if((s=t.propsOptions[0])&&S(s,e))return o[e]=2,r[e];if(i!==R&&S(i,e))return o[e]=3,i[e];o[e]=4}}const l=Li[e];let u,p;return l?(e==="$attrs"&&X(t,0,e),l(t)):(u=h.__cssModules)&&(u=u[e])?u:i!==R&&S(i,e)?(o[e]=3,i[e]):(p=c.config.globalProperties,S(p,e)?p[e]:void 0)},set({_:t},e,i){const{data:n,setupState:a,ctx:r}=t;if(a!==R&&S(a,e))a[e]=i;else if(n!==R&&S(n,e))n[e]=i;else if(S(t.props,e))return!1;return!(e[0]==="$"&&e.slice(1)in t||(r[e]=i,0))},has({_:{data:t,setupState:e,accessCache:i,ctx:n,appContext:a,propsOptions:r}},o){let h;return i[o]!==void 0||t!==R&&S(t,o)||e!==R&&S(e,o)||(h=r[0])&&S(h,o)||S(n,o)||S(Li,o)||S(a.config.globalProperties,o)}};pt({},$i,{get(t,e){if(e!==Symbol.unscopables)return $i.get(t,e,t)},has:(t,e)=>e[0]!=="_"&&!Tt(e)});let Yi=null;function Xi(t,e,i){const n=arguments.length;return n===2?q(e)&&!k(e)?se(e)?ot(t,null,[e]):ot(t,e):ot(t,null,e):(n>3?i=Array.prototype.slice.call(arguments,2):n===3&&se(i)&&(i=[i]),ot(t,e,i))}var ue=typeof window<"u"&&window.document!==void 0,Z=ue?window:{},Ie=!(!ue||!Z.document.documentElement)&&"ontouchstart"in Z.document.documentElement,Ae=!!ue&&"PointerEvent"in Z,x="cropper",Le="all",Pi="crop",Ui="move",Fi="zoom",vt="e",yt="w",Bt="s",st="n",It="ne",At="nw",Lt="se",$t="sw",$e="".concat(x,"-crop"),qi="".concat(x,"-disabled"),E="".concat(x,"-hidden"),Kn="".concat(x,"-hide"),Ye="".concat(x,"-invisible"),St="".concat(x,"-modal"),Xe="".concat(x,"-move"),Yt="".concat(x,"Action"),pe="".concat(x,"Preview"),Vi="crop",Ki="move",Pe="crop",Ue="cropend",Fe="cropmove",qe="cropstart",Qi="dblclick",Zi=Ae?"pointerdown":Ie?"touchstart":"mousedown",Gi=Ae?"pointermove":Ie?"touchmove":"mousemove",Ji=Ae?"pointerup pointercancel":Ie?"touchend touchcancel":"mouseup",tn="resize",en="wheel",Ve="zoom",Qn="image/jpeg",Zn=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Gn=/^data:/,Jn=/^data:image\/jpegbase64,/;function Ke(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function nn(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),i.push.apply(i,n)}return i}function an(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?nn(Object(i),!0).forEach(function(n){ta(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):nn(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function ta(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function rn(t){return(rn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var ea=Number.isNaN||Z.isNaN;function y(t){return typeof t=="number"&&!ea(t)}var on=function(t){return t>0&&t<1/0};function Qe(t){return t===void 0}function bt(t){return rn(t)==="object"&&t!==null}var ia=Object.prototype.hasOwnProperty;function de(t){if(!bt(t))return!1;try{var e=t.constructor,i=e.prototype;return e&&i&&ia.call(i,"isPrototypeOf")}catch{return!1}}function ht(t){return typeof t=="function"}var na=Array.prototype.slice;function sn(t){return Array.from?Array.from(t):na.call(t)}function N(t,e){return t&&ht(e)&&(Array.isArray(t)||y(t.length)?sn(t).forEach(function(i,n){e.call(t,i,n,t)}):bt(t)&&Object.keys(t).forEach(function(i){e.call(t,t[i],i,t)})),t}var M=Object.assign||function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return bt(t)&&i.length>0&&i.forEach(function(a){bt(a)&&Object.keys(a).forEach(function(r){t[r]=a[r]})}),t},aa=/\.\d*(?:0|9){12}\d*$/;function kt(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return aa.test(t)?Math.round(t*e)/e:t}var ra=/^width|height|left|top|marginLeft|marginTop$/;function ct(t,e){var i=t.style;N(e,function(n,a){ra.test(a)&&y(n)&&(n="".concat(n,"px")),i[a]=n})}function _(t,e){if(e)if(y(t.length))N(t,function(n){_(n,e)});else if(t.classList)t.classList.add(e);else{var i=t.className.trim();i?i.indexOf(e)<0&&(t.className="".concat(i," ").concat(e)):t.className=e}}function A(t,e){e&&(y(t.length)?N(t,function(i){A(i,e)}):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function Ot(t,e,i){e&&(y(t.length)?N(t,function(n){Ot(n,e,i)}):i?_(t,e):A(t,e))}var oa=/([a-z\d])([A-Z])/g;function Ze(t){return t.replace(oa,"$1-$2").toLowerCase()}function Ge(t,e){return bt(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(Ze(e)))}function Xt(t,e,i){bt(i)?t[e]=i:t.dataset?t.dataset[e]=i:t.setAttribute("data-".concat(Ze(e)),i)}var hn=/\s\s*/,cn=function(){var t=!1;if(ue){var e=!1,i=function(){},n=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(a){e=a}});Z.addEventListener("test",i,n),Z.removeEventListener("test",i,n)}return t}();function K(t,e,i){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=i;e.trim().split(hn).forEach(function(r){if(!cn){var o=t.listeners;o&&o[r]&&o[r][i]&&(a=o[r][i],delete o[r][i],Object.keys(o[r]).length===0&&delete o[r],Object.keys(o).length===0&&delete t.listeners)}t.removeEventListener(r,a,n)})}function Q(t,e,i){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=i;e.trim().split(hn).forEach(function(r){if(n.once&&!cn){var o=t.listeners,h=o===void 0?{}:o;a=function(){delete h[r][i],t.removeEventListener(r,a,n);for(var c=arguments.length,s=new Array(c),l=0;l<c;l++)s[l]=arguments[l];i.apply(t,s)},h[r]||(h[r]={}),h[r][i]&&t.removeEventListener(r,h[r][i],n),h[r][i]=a,t.listeners=h}t.addEventListener(r,a,n)})}function Pt(t,e,i){var n;return ht(Event)&&ht(CustomEvent)?n=new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,i),t.dispatchEvent(n)}function ln(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var Je=Z.location,sa=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function un(t){var e=t.match(sa);return e!==null&&(e[1]!==Je.protocol||e[2]!==Je.hostname||e[3]!==Je.port)}function pn(t){var e="timestamp=".concat(new Date().getTime());return t+(t.indexOf("?")===-1?"?":"&")+e}function Ut(t){var e=t.rotate,i=t.scaleX,n=t.scaleY,a=t.translateX,r=t.translateY,o=[];y(a)&&a!==0&&o.push("translateX(".concat(a,"px)")),y(r)&&r!==0&&o.push("translateY(".concat(r,"px)")),y(e)&&e!==0&&o.push("rotate(".concat(e,"deg)")),y(i)&&i!==1&&o.push("scaleX(".concat(i,")")),y(n)&&n!==1&&o.push("scaleY(".concat(n,")"));var h=o.length?o.join(" "):"none";return{WebkitTransform:h,msTransform:h,transform:h}}function fe(t,e){var i=t.pageX,n=t.pageY,a={endX:i,endY:n};return e?a:an({startX:i,startY:n},a)}function lt(t){var e=t.aspectRatio,i=t.height,n=t.width,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",r=on(n),o=on(i);if(r&&o){var h=i*e;a==="contain"&&h>n||a==="cover"&&h<n?i=n/e:n=i*e}else r?i=n/e:o&&(n=i*e);return{width:n,height:i}}function ha(t,e,i,n){var a,r=e.aspectRatio,o=e.naturalWidth,h=e.naturalHeight,c=e.rotate,s=c===void 0?0:c,l=e.scaleX,u=l===void 0?1:l,p=e.scaleY,g=p===void 0?1:p,v=i.aspectRatio,m=i.naturalWidth,f=i.naturalHeight,b=n.fillColor,D=b===void 0?"transparent":b,w=n.imageSmoothingEnabled,T=w===void 0||w,d=n.imageSmoothingQuality,C=d===void 0?"low":d,O=n.maxWidth,$=O===void 0?1/0:O,L=n.maxHeight,z=L===void 0?1/0:L,G=n.minWidth,W=G===void 0?0:G,H=n.minHeight,ut=H===void 0?0:H,P=document.createElement("canvas"),I=P.getContext("2d"),qt=lt({aspectRatio:v,width:$,height:z}),Vt=lt({aspectRatio:v,width:W,height:ut},"cover"),ei=Math.min(qt.width,Math.max(Vt.width,m)),ii=Math.min(qt.height,Math.max(Vt.height,f)),gn=lt({aspectRatio:r,width:$,height:z}),mn=lt({aspectRatio:r,width:W,height:ut},"cover"),vn=Math.min(gn.width,Math.max(mn.width,o)),yn=Math.min(gn.height,Math.max(mn.height,h)),va=[-vn/2,-yn/2,vn,yn];return P.width=kt(ei),P.height=kt(ii),I.fillStyle=D,I.fillRect(0,0,ei,ii),I.save(),I.translate(ei/2,ii/2),I.rotate(s*Math.PI/180),I.scale(u,g),I.imageSmoothingEnabled=T,I.imageSmoothingQuality=C,I.drawImage.apply(I,[t].concat(function(j){if(Array.isArray(j))return Ke(j)}(a=va.map(function(j){return Math.floor(kt(j))}))||function(j){if(typeof Symbol<"u"&&j[Symbol.iterator]!=null||j["@@iterator"]!=null)return Array.from(j)}(a)||function(j,bn){if(j){if(typeof j=="string")return Ke(j,bn);var Et=Object.prototype.toString.call(j).slice(8,-1);return Et==="Object"&&j.constructor&&(Et=j.constructor.name),Et==="Map"||Et==="Set"?Array.from(j):Et==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Et)?Ke(j,bn):void 0}}(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())),I.restore(),P}var dn=String.fromCharCode,ca=/^data:.*,/;const la={methods:{render:function(){this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.$props,i=this.container,n=this.cropper,a=Number(e.minContainerWidth),r=Number(e.minContainerHeight);_(n,E),A(t,E);var o={width:Math.max(i.offsetWidth,a>=0?a:200),height:Math.max(i.offsetHeight,r>=0?r:100)};this.containerData=o,ct(n,{width:o.width,height:o.height}),_(t,E),A(n,E)},initCanvas:function(){var t=this.containerData,e=this.imageData,i=this.viewMode,n=Math.abs(e.rotate)%180==90,a=n?e.naturalHeight:e.naturalWidth,r=n?e.naturalWidth:e.naturalHeight,o=a/r,h=t.width,c=t.height;t.height*o>t.width?i===3?h=t.height*o:c=t.width/o:i===3?c=t.width/o:h=t.height*o;var s={aspectRatio:o,naturalWidth:a,naturalHeight:r,width:h,height:c};this.canvasData=s,this.limited=i===1||i===2,this.limitCanvas(!0,!0),s.width=Math.min(Math.max(s.width,s.minWidth),s.maxWidth),s.height=Math.min(Math.max(s.height,s.minHeight),s.maxHeight),s.left=(t.width-s.width)/2,s.top=(t.height-s.height)/2,s.oldLeft=s.left,s.oldTop=s.top,this.initialCanvasData=M({},s)},limitCanvas:function(t,e){var i=this.$props,n=this.containerData,a=this.canvasData,r=this.cropBoxData,o=i.viewMode,h=a.aspectRatio,c=this.cropped&&r;if(t){var s=Number(i.minCanvasWidth)||0,l=Number(i.minCanvasHeight)||0;o>1?(s=Math.max(s,n.width),l=Math.max(l,n.height),o===3&&(l*h>s?s=l*h:l=s/h)):o>0&&(s?s=Math.max(s,c?r.width:0):l?l=Math.max(l,c?r.height:0):c&&(s=r.width,(l=r.height)*h>s?s=l*h:l=s/h));var u=lt({aspectRatio:h,width:s,height:l});s=u.width,l=u.height,a.minWidth=s,a.minHeight=l,a.maxWidth=1/0,a.maxHeight=1/0}if(e)if(o>(c?0:1)){var p=n.width-a.width,g=n.height-a.height;a.minLeft=Math.min(0,p),a.minTop=Math.min(0,g),a.maxLeft=Math.max(0,p),a.maxTop=Math.max(0,g),c&&this.limited&&(a.minLeft=Math.min(r.left,r.left+(r.width-a.width)),a.minTop=Math.min(r.top,r.top+(r.height-a.height)),a.maxLeft=r.left,a.maxTop=r.top,o===2&&(a.width>=n.width&&(a.minLeft=Math.min(0,p),a.maxLeft=Math.max(0,p)),a.height>=n.height&&(a.minTop=Math.min(0,g),a.maxTop=Math.max(0,g))))}else a.minLeft=-a.width,a.minTop=-a.height,a.maxLeft=n.width,a.maxTop=n.height},initCropBox:function(){var t=this.$props,e=this.canvasData,i=t.aspectRatio||t.initialAspectRatio,n=Number(t.autoCropArea)||.8,a={width:e.width,height:e.height};i&&(e.height*i>e.width?a.height=a.width/i:a.width=a.height*i),this.cropBoxData=a,this.limitCropBox(!0,!0),a.width=Math.min(Math.max(a.width,a.minWidth),a.maxWidth),a.height=Math.min(Math.max(a.height,a.minHeight),a.maxHeight),a.width=Math.max(a.minWidth,a.width*n),a.height=Math.max(a.minHeight,a.height*n),a.left=e.left+(e.width-a.width)/2,a.top=e.top+(e.height-a.height)/2,a.oldLeft=a.left,a.oldTop=a.top,this.initialCropBoxData=M({},a)},limitCropBox:function(t,e){var i=this.$props,n=this.containerData,a=this.canvasData,r=this.cropBoxData,o=this.limited,h=i.aspectRatio;if(t){var c=Number(i.minCropBoxWidth)||0,s=Number(i.minCropBoxHeight)||0,l=o?Math.min(n.width,a.width,a.width+a.left,n.width-a.left):n.width,u=o?Math.min(n.height,a.height,a.height+a.top,n.height-a.top):n.height;c=Math.min(c,n.width),s=Math.min(s,n.height),h&&(c&&s?s*h>c?s=c/h:c=s*h:c?s=c/h:s&&(c=s*h),u*h>l?u=l/h:l=u*h),r.minWidth=Math.min(c,l),r.minHeight=Math.min(s,u),r.maxWidth=l,r.maxHeight=u}e&&(o?(r.minLeft=Math.max(0,a.left),r.minTop=Math.max(0,a.top),r.maxLeft=Math.min(n.width,a.left+a.width)-r.width,r.maxTop=Math.min(n.height,a.top+a.height)-r.height):(r.minLeft=0,r.minTop=0,r.maxLeft=n.width-r.width,r.maxTop=n.height-r.height))},renderCanvas:function(t,e){var i=this.canvasData,n=this.imageData;if(e){var a=function(s){var l=s.width,u=s.height,p=s.degree;if((p=Math.abs(p)%180)==90)return{width:u,height:l};var g=p%90*Math.PI/180,v=Math.sin(g),m=Math.cos(g),f=l*m+u*v,b=l*v+u*m;return p>90?{width:b,height:f}:{width:f,height:b}}({width:n.naturalWidth*Math.abs(n.scaleX||1),height:n.naturalHeight*Math.abs(n.scaleY||1),degree:n.rotate||0}),r=a.width,o=a.height,h=i.width*(r/i.naturalWidth),c=i.height*(o/i.naturalHeight);i.left-=(h-i.width)/2,i.top-=(c-i.height)/2,i.width=h,i.height=c,i.aspectRatio=r/o,i.naturalWidth=r,i.naturalHeight=o,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,ct(this.canvas,M({width:i.width,height:i.height},Ut({translateX:i.left,translateY:i.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,i=this.imageData,n=i.naturalWidth*(e.width/e.naturalWidth),a=i.naturalHeight*(e.height/e.naturalHeight);M(i,{width:n,height:a,left:(e.width-n)/2,top:(e.height-a)/2}),ct(this.image,M({width:i.width,height:i.height},Ut(M({translateX:i.left,translateY:i.top},i)))),t&&this.output()},renderCropBox:function(){var t=this.$props,e=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,t.movable&&t.cropBoxMovable&&Xt(this.face,Yt,i.width>=e.width&&i.height>=e.height?Ui:Le),ct(this.cropBox,M({width:i.width,height:i.height},Ut({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Pt(this.element,Pe,this.getData())}}};function ua(t){return function(e){if(Array.isArray(e))return ti(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,i){if(e){if(typeof e=="string")return ti(e,i);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ti(e,i):void 0}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ti(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}const pa={methods:{crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.modal&&_(this.dragBox,St),A(this.cropBox,E),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=M({},this.initialImageData),this.canvasData=M({},this.initialCanvasData),this.cropBoxData=M({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(M(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),A(this.dragBox,St),_(this.cropBox,E)),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,A(this.cropper,qi)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,_(this.cropper,qi)),this},destroy:function(){var t=this.element;return t.cropper?(t.cropper=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this):this},move:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=this.canvasData,n=i.left,a=i.top;return this.moveTo(Qe(t)?t:n+Number(t),Qe(e)?e:a+Number(e))},moveTo:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=this.canvasData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.movable&&(y(t)&&(i.left=t,n=!0),y(e)&&(i.top=e,n=!0),n&&this.renderCanvas(!0)),this},zoom:function(t,e){var i=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(i.width*t/i.naturalWidth,null,e)},zoomTo:function(t,e,i){var n=this.canvasData,a=n.width,r=n.height,o=n.naturalWidth,h=n.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&this.zoomable){var c=o*t,s=h*t;if(Pt(this.element,Ve,{ratio:t,oldRatio:a/o,originalEvent:i})===!1)return this;if(i){var l=this.pointers,u=ln(this.cropper),p=l&&Object.keys(l).length?function(g){var v=0,m=0,f=0;return N(g,function(b){var D=b.startX,w=b.startY;v+=D,m+=w,f+=1}),{pageX:v/=f,pageY:m/=f}}(l):{pageX:i.pageX,pageY:i.pageY};n.left-=(c-a)*((p.pageX-u.left-n.left)/a),n.top-=(s-r)*((p.pageY-u.top-n.top)/r)}else de(e)&&y(e.x)&&y(e.y)?(n.left-=(c-a)*((e.x-n.left)/a),n.top-=(s-r)*((e.y-n.top)/r)):(n.left-=(c-a)/2,n.top-=(s-r)/2);n.width=c,n.height=s,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return y(t=Number(t))&&this.ready&&!this.disabled&&this.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,y(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(y(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=this.imageData,n=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.scalable&&(y(t)&&(i.scaleX=t,n=!0),y(e)&&(i.scaleY=e,n=!0),n&&this.renderCanvas(!0,!0)),this},getData:function(){var t,e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],i=this.imageData,n=this.canvasData,a=this.cropBoxData;if(this.ready&&this.cropped){t={x:a.left-n.left,y:a.top-n.top,width:a.width,height:a.height};var r=i.width/i.naturalWidth;if(N(t,function(c,s){t[s]=c/r}),e){var o=Math.round(t.y+t.height),h=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=h-t.x,t.height=o-t.y}}else t={x:0,y:0,width:0,height:0};return this.rotatable&&(t.rotate=i.rotate||0),this.scalable&&(t.scaleX=i.scaleX||1,t.scaleY=i.scaleY||1),t},setData:function(t){var e=this.$props,i=this.imageData,n=this.canvasData,a={};if(this.ready&&!this.disabled&&de(t)){var r=!1;e.rotatable&&y(t.rotate)&&t.rotate!==i.rotate&&(i.rotate=t.rotate,r=!0),e.scalable&&(y(t.scaleX)&&t.scaleX!==i.scaleX&&(i.scaleX=t.scaleX,r=!0),y(t.scaleY)&&t.scaleY!==i.scaleY&&(i.scaleY=t.scaleY,r=!0)),r&&this.renderCanvas(!0,!0);var o=i.width/i.naturalWidth;y(t.x)&&(a.left=t.x*o+n.left),y(t.y)&&(a.top=t.y*o+n.top),y(t.width)&&(a.width=t.width*o),y(t.height)&&(a.height=t.height*o),this.setCropBoxData(a)}return this},getContainerData:function(){return this.ready?M({},this.containerData):{}},getImageData:function(){return this.sized?M({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&N(["left","top","width","height","naturalWidth","naturalHeight"],function(i){e[i]=t[i]}),e},setCanvasData:function(t){var e=this.canvasData,i=e.aspectRatio;return this.ready&&!this.disabled&&de(t)&&(y(t.left)&&(e.left=t.left),y(t.top)&&(e.top=t.top),y(t.width)?(e.width=t.width,e.height=t.width/i):y(t.height)&&(e.height=t.height,e.width=t.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(t){var e,i,n=this.cropBoxData,a=this.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&de(t)&&(y(t.left)&&(n.left=t.left),y(t.top)&&(n.top=t.top),y(t.width)&&t.width!==n.width&&(e=!0,n.width=t.width),y(t.height)&&t.height!==n.height&&(i=!0,n.height=t.height),a&&(e?n.height=n.width/a:i&&(n.width=n.height*a)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,i=ha(this.image,this.imageData,e,t);if(!this.cropped)return i;var n=this.getData(),a=n.x,r=n.y,o=n.width,h=n.height,c=i.width/Math.floor(e.naturalWidth);c!==1&&(a*=c,r*=c,o*=c,h*=c);var s=o/h,l=lt({aspectRatio:s,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),u=lt({aspectRatio:s,width:t.minWidth||0,height:t.minHeight||0},"cover"),p=lt({aspectRatio:s,width:t.width||(c!==1?i.width:o),height:t.height||(c!==1?i.height:h)}),g=p.width,v=p.height;g=Math.min(l.width,Math.max(u.width,g)),v=Math.min(l.height,Math.max(u.height,v));var m=document.createElement("canvas"),f=m.getContext("2d");m.width=kt(g),m.height=kt(v),f.fillStyle=t.fillColor||"transparent",f.fillRect(0,0,g,v);var b=t.imageSmoothingEnabled,D=b===void 0||b,w=t.imageSmoothingQuality;f.imageSmoothingEnabled=D,w&&(f.imageSmoothingQuality=w);var T,d,C,O,$,L,z=i.width,G=i.height,W=a,H=r;W<=-o||W>z?(W=0,T=0,C=0,$=0):W<=0?(C=-W,W=0,$=T=Math.min(z,o+W)):W<=z&&(C=0,$=T=Math.min(o,z-W)),T<=0||H<=-h||H>G?(H=0,d=0,O=0,L=0):H<=0?(O=-H,H=0,L=d=Math.min(G,h+H)):H<=G&&(O=0,L=d=Math.min(h,G-H));var ut=[W,H,T,d];if($>0&&L>0){var P=g/o;ut.push(C*P,O*P,$*P,L*P)}return f.drawImage.apply(f,[i].concat(ua(ut.map(function(I){return Math.floor(kt(I))})))),m},setAspectRatio:function(t){var e=this.options;return this.disabled||Qe(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(){var t=this.$props,e=this.dragBox,i=this.face;if(this.ready&&!this.disabled){var n=t.dragMode===Vi,a=t.movable&&t.dragMode===Ki;Xt(e,Yt,t.dragMode),Ot(e,$e,n),Ot(e,Xe,a),t.cropBoxMovable||(Xt(i,Yt,t.dragMode),Ot(i,$e,n),Ot(i,Xe,a))}return this},getCropData:function(t,e){var i,n={outputType:"image/jpeg"};e===void 0?i=t:(n=M(n,t),i=e),i(this.getCroppedCanvas(n).toDataURL(n.outputType))},getCropBlob:function(t,e){var i,n={outputType:"image/jpeg"};e===void 0?i=t:(n=M(n,t),i=e),this.getCroppedCanvas(n).toBlob(function(a){i(a)},n.outputType,1)}}},da={methods:{change:function(t){var e,i=this.$props,n=this.canvasData,a=this.containerData,r=this.cropBoxData,o=this.pointers,h=this.action,c=i.aspectRatio,s=r.left,l=r.top,u=r.width,p=r.height,g=s+u,v=l+p,m=0,f=0,b=a.width,D=a.height,w=!0;!c&&t.shiftKey&&(c=u&&p?u/p:1),this.limited&&(m=r.minLeft,f=r.minTop,b=m+Math.min(a.width,n.width,n.left+n.width),D=f+Math.min(a.height,n.height,n.top+n.height));var T=o[Object.keys(o)[0]],d={x:T.endX-T.startX,y:T.endY-T.startY},C=function(O){switch(O){case vt:g+d.x>b&&(d.x=b-g);break;case yt:s+d.x<m&&(d.x=m-s);break;case st:l+d.y<f&&(d.y=f-l);break;case Bt:v+d.y>D&&(d.y=D-v)}};switch(h){case Le:s+=d.x,l+=d.y;break;case vt:if(d.x>=0&&(g>=b||c&&(l<=f||v>=D))){w=!1;break}C(vt),(u+=d.x)<0&&(h=yt,s-=u=-u),c&&(p=u/c,l+=(r.height-p)/2);break;case st:if(d.y<=0&&(l<=f||c&&(s<=m||g>=b))){w=!1;break}C(st),p-=d.y,l+=d.y,p<0&&(h=Bt,l-=p=-p),c&&(u=p*c,s+=(r.width-u)/2);break;case yt:if(d.x<=0&&(s<=m||c&&(l<=f||v>=D))){w=!1;break}C(yt),u-=d.x,s+=d.x,u<0&&(h=vt,s-=u=-u),c&&(p=u/c,l+=(r.height-p)/2);break;case Bt:if(d.y>=0&&(v>=D||c&&(s<=m||g>=b))){w=!1;break}C(Bt),(p+=d.y)<0&&(h=st,l-=p=-p),c&&(u=p*c,s+=(r.width-u)/2);break;case It:if(c){if(d.y<=0&&(l<=f||g>=b)){w=!1;break}C(st),p-=d.y,l+=d.y,u=p*c}else C(st),C(vt),d.x>=0?g<b?u+=d.x:d.y<=0&&l<=f&&(w=!1):u+=d.x,d.y<=0?l>f&&(p-=d.y,l+=d.y):(p-=d.y,l+=d.y);u<0&&p<0?(h=$t,l-=p=-p,s-=u=-u):u<0?(h=At,s-=u=-u):p<0&&(h=Lt,l-=p=-p);break;case At:if(c){if(d.y<=0&&(l<=f||s<=m)){w=!1;break}C(st),p-=d.y,l+=d.y,u=p*c,s+=r.width-u}else C(st),C(yt),d.x<=0?s>m?(u-=d.x,s+=d.x):d.y<=0&&l<=f&&(w=!1):(u-=d.x,s+=d.x),d.y<=0?l>f&&(p-=d.y,l+=d.y):(p-=d.y,l+=d.y);u<0&&p<0?(h=Lt,l-=p=-p,s-=u=-u):u<0?(h=It,s-=u=-u):p<0&&(h=$t,l-=p=-p);break;case $t:if(c){if(d.x<=0&&(s<=m||v>=D)){w=!1;break}C(yt),u-=d.x,s+=d.x,p=u/c}else C(Bt),C(yt),d.x<=0?s>m?(u-=d.x,s+=d.x):d.y>=0&&v>=D&&(w=!1):(u-=d.x,s+=d.x),d.y>=0?v<D&&(p+=d.y):p+=d.y;u<0&&p<0?(h=It,l-=p=-p,s-=u=-u):u<0?(h=Lt,s-=u=-u):p<0&&(h=At,l-=p=-p);break;case Lt:if(c){if(d.x>=0&&(g>=b||v>=D)){w=!1;break}C(vt),p=(u+=d.x)/c}else C(Bt),C(vt),d.x>=0?g<b?u+=d.x:d.y>=0&&v>=D&&(w=!1):u+=d.x,d.y>=0?v<D&&(p+=d.y):p+=d.y;u<0&&p<0?(h=At,l-=p=-p,s-=u=-u):u<0?(h=$t,s-=u=-u):p<0&&(h=It,l-=p=-p);break;case Ui:this.move(d.x,d.y),w=!1;break;case Fi:this.zoom(function(O){var $=an({},O),L=0;return N(O,function(z,G){delete $[G],N($,function(W){var H=Math.abs(z.startX-W.startX),ut=Math.abs(z.startY-W.startY),P=Math.abs(z.endX-W.endX),I=Math.abs(z.endY-W.endY),qt=Math.sqrt(H*H+ut*ut),Vt=(Math.sqrt(P*P+I*I)-qt)/qt;Math.abs(Vt)>Math.abs(L)&&(L=Vt)})}),L}(o),t),w=!1;break;case Pi:if(!d.x||!d.y){w=!1;break}e=ln(this.cropper),s=T.startX-e.left,l=T.startY-e.top,u=r.minWidth,p=r.minHeight,d.x>0?h=d.y>0?Lt:It:d.x<0&&(s-=u,h=d.y>0?$t:At),d.y<0&&(l-=p),this.cropped||(A(this.cropBox,E),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}w&&(r.width=u,r.height=p,r.left=s,r.top=l,this.action=h,this.renderCropBox()),N(o,function(O){O.startX=O.endX,O.startY=O.endY})}}},fa={methods:{resize:function(){if(!this.disabled){var t,e,i=this.$props,n=this.container,a=this.containerData,r=n.offsetWidth/a.width,o=n.offsetHeight/a.height,h=Math.abs(r-1)>Math.abs(o-1)?r:o;h!==1&&(i.restore&&(t=this.getCanvasData(),e=this.getCropBoxData()),this.render(),i.restore&&(this.setCanvasData(N(t,function(c,s){t[s]=c*h})),this.setCropBoxData(N(e,function(c,s){e[s]=c*h}))))}},dblclick:function(){var t,e;this.disabled||this.dragMode==="none"||this.setDragMode((t=this.dragBox,e=$e,(t.classList?t.classList.contains(e):t.className.indexOf(e)>-1)?Ki:Vi))},wheel:function(t){var e=this,i=Number(this.wheelZoomRatio)||.1,n=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(function(){e.wheeling=!1},50),t.deltaY?n=t.deltaY>0?1:-1:t.wheelDelta?n=-t.wheelDelta/120:t.detail&&(n=t.detail>0?1:-1),this.zoom(-n*i,t)))},cropStart:function(t){var e=t.buttons,i=t.button;if(!(this.disabled||(t.type==="mousedown"||t.type==="pointerdown"&&t.pointerType==="mouse")&&(y(e)&&e!==1||y(i)&&i!==0||t.ctrlKey))){var n,a=this.$props,r=this.pointers;t.changedTouches?N(t.changedTouches,function(o){r[o.identifier]=fe(o)}):r[t.pointerId||0]=fe(t),n=Object.keys(r).length>1&&a.zoomable&&a.zoomOnTouch?Fi:Ge(t.target,Yt),Zn.test(n)&&Pt(this.element,qe,{originalEvent:t,action:n})!==!1&&(t.preventDefault(),this.action=n,this.cropping=!1,n===Pi&&(this.cropping=!0,_(this.dragBox,St)))}},cropMove:function(t){var e=this.action;if(!this.disabled&&e){var i=this.pointers;t.preventDefault(),Pt(this.element,Fe,{originalEvent:t,action:e})!==!1&&(t.changedTouches?N(t.changedTouches,function(n){M(i[n.identifier]||{},fe(n,!0))}):M(i[t.pointerId||0]||{},fe(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,i=this.pointers;t.changedTouches?N(t.changedTouches,function(n){delete i[n.identifier]}):delete i[t.pointerId||0],e&&(t.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,Ot(this.dragBox,St,this.cropped&&this.modal)),Pt(this.element,Ue,{originalEvent:t,action:e}))}}}},fn=(Ft={name:"V3Cropper",render:function(){return Xi("div",[Xi("img",{src:this.src,id:"element",style:{display:"none"}})])},props:{src:{type:[String,Blob,null,File],default:""},viewMode:{type:Number,default:0},dragMode:{type:String,default:"crop"},initialAspectRatio:{type:Number,default:NaN},data:{type:Object,default:null},responsive:{type:Boolean,default:!0},restore:{type:Boolean,default:!0},checkCrossOrigin:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},guides:{type:Boolean,default:!0},center:{type:Boolean,default:!0},highlight:{type:Boolean,default:!0},background:{type:Boolean,default:!0},autoCrop:{type:Boolean,default:!0},autoCropArea:{type:Number,default:.8},movable:{type:Boolean,default:!0},rotatable:{type:Boolean,default:!0},scalable:{type:Boolean,default:!0},zoomable:{type:Boolean,default:!0},zoomOnTouch:{type:Boolean,default:!0},zoomOnWheel:{type:Boolean,default:!0},wheelZoomRatio:{type:Number,default:.1},cropBoxMovable:{type:Boolean,default:!0},cropBoxResizable:{type:Boolean,default:!0},toggleDragModeOnDblclick:{type:Boolean,default:!0},minContainerWidth:{type:Number,default:200},minContainerHeight:{type:Number,default:100},minCanvasWidth:{type:Number,default:0},minCanvasHeight:{type:Number,default:0},minCropBoxWidth:{type:Number,default:0},minCropBoxHeight:{type:Number,default:0},maxImgSize:{type:[Number,String],default:2e3}},data:function(){return{element:{},cropped:!1,disabled:!1,pointers:{},ready:!1,reloading:!1,replaced:!1,sized:!1,sizing:!1,checkOrientation:!0,xhr:{},limited:"",isImg:!1,originalUrl:"",crossOriginUrl:"",url:"",sizingImage:"",image:{},imageData:{},initialImageData:{},container:{},cropper:{},canvas:{},dragBox:{},cropBox:{},viewBox:{},viewBoxImage:{},face:{},containerData:{},canvasData:{},initialCanvasData:{},initialCropBoxData:{},cropBoxData:{}}},mixins:[{methods:{initPreview:function(){var t=this.element,e=this.crossOrigin,i=this.preview,n=e?this.crossOriginUrl:this.url,a=t.alt||"The image to preview",r=document.createElement("img");if(e&&(r.crossOrigin=e),r.src=n,r.alt=a,this.viewBox.appendChild(r),this.viewBoxImage=r,i){var o=i;typeof i=="string"?o=t.ownerDocument.querySelectorAll(i):i.querySelector&&(o=[i]),this.previews=o,N(o,function(h){var c=document.createElement("img");Xt(h,pe,{width:h.offsetWidth,height:h.offsetHeight,html:h.innerHTML}),e&&(c.crossOrigin=e),c.src=n,c.alt=a,c.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',h.innerHTML="",h.appendChild(c)})}},resetPreview:function(){N(this.previews,function(t){var e=Ge(t,pe);ct(t,{width:e.width,height:e.height}),t.innerHTML=e.html,function(i,n){if(bt(i[n]))try{delete i[n]}catch{i[n]=void 0}else if(i.dataset)try{delete i.dataset[n]}catch{i.dataset[n]=void 0}else i.removeAttribute("data-".concat(Ze(n)))}(t,pe)})},preview:function(){var t=this.imageData,e=this.canvasData,i=this.cropBoxData,n=i.width,a=i.height,r=t.width,o=t.height,h=i.left-e.left-t.left,c=i.top-e.top-t.top;this.cropped&&!this.disabled&&(ct(this.viewBoxImage,M({width:r,height:o},Ut(M({translateX:-h,translateY:-c},t)))),N(this.previews,function(s){var l=Ge(s,pe),u=l.width,p=l.height,g=u,v=p,m=1;n&&(v=a*(m=u/n)),a&&v>p&&(g=n*(m=p/a),v=p),ct(s,{width:g,height:v}),ct(s.getElementsByTagName("img")[0],M({width:r*m,height:o*m},Ut(M({translateX:-h*m,translateY:-c*m},t))))}))}}},la,pa,{methods:{bind:function(){var t=this.element,e=this.$props,i=this.cropper;Q(t,qe,this.cropstart),Q(t,Fe,this.cropmove),Q(t,Ue,this.cropend),Q(t,Pe,this.cropping),Q(t,Ve,this.zooming),Q(i,Zi,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&Q(i,en,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&Q(i,Qi,this.onDblclick=this.dblclick.bind(this)),Q(t.ownerDocument,Gi,this.onCropMove=this.cropMove.bind(this)),Q(t.ownerDocument,Ji,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&Q(window,tn,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.$props,i=this.cropper;ht(e.cropstart)&&K(t,qe,e.cropstart),ht(e.cropmove)&&K(t,Fe,e.cropmove),ht(e.cropend)&&K(t,Ue,e.cropend),ht(e.crop)&&K(t,Pe,e.crop),ht(e.zoom)&&K(t,Ve,e.zoom),K(i,Zi,this.onCropStart),e.zoomable&&e.zoomOnWheel&&K(i,en,this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&K(i,Qi,this.onDblclick),K(t.ownerDocument,Gi,this.onCropMove),K(t.ownerDocument,Ji,this.onCropEnd),e.responsive&&K(window,tn,this.onResize)}}},da,fa,{methods:{onReady:function(){this.$emit("ready")},cropstart:function(t){this.$emit("cropStart",t)},cropmove:function(t){this.$emit("cropMove",t)},cropend:function(t){this.$emit("cropEnd",t)},cropping:function(t){this.$emit("crop",t)},zooming:function(t){this.$emit("zoom",t)}}},{watch:{dragMode:function(){this.setDragMode()},viewMode:function(){this.imageData=M({},this.initialImageData),this.initCanvas(),this.reset()},src:function(t){var e=this.viewBox,i=this.canvas;e.removeChild(e.getElementsByTagName("img")[0]),i.removeChild(i.getElementsByTagName("img")[0]),t?this.loadImage(t):(this.clear(),this.unbind())},modal:function(t){t?_(this.dragBox,St):A(this.dragBox,St)},guides:function(t){t?_(this.cropBox.getElementsByClassName("".concat(x,"-dashed")),E):A(this.cropBox.getElementsByClassName("".concat(x,"-dashed")),E)},center:function(t){t?_(this.cropBox.getElementsByClassName("".concat(x,"-center")),E):A(this.cropBox.getElementsByClassName("".concat(x,"-center")),E)},highlight:function(t){t?_(this.face,Ye):A(this.face,Ye)},background:function(t){t?_(this.cropper,"".concat(x,"-bg")):A(this.cropper,"".concat(x,"-bg"))}}},{methods:{builder:function(){var t=this.element,e=this.$props,i=t.parentNode,n=document.createElement("div");n.innerHTML=`
  <div class="cropper-container" touch-action="none">
    <div class="cropper-wrap-box">
      <div class="cropper-canvas">
      </div>
    </div>
    <div class="cropper-drag-box"></div>
    <div class="cropper-crop-box">
      <span class="cropper-view-box">
      </span>
      <span class="cropper-dashed dashed-h"></span>
      <span class="cropper-dashed dashed-v"></span>
      <span class="cropper-center"></span>
      <span class="cropper-face"></span>
      <span class="cropper-line line-e" data-cropper-action="e"></span>
      <span class="cropper-line line-n" data-cropper-action="n"></span>
      <span class="cropper-line line-w" data-cropper-action="w"></span>
      <span class="cropper-line line-s" data-cropper-action="s"></span>
      <span class="cropper-point point-e" data-cropper-action="e"></span>
      <span class="cropper-point point-n" data-cropper-action="n"></span>
      <span class="cropper-point point-w" data-cropper-action="w"></span>
      <span class="cropper-point point-s" data-cropper-action="s"></span>
      <span class="cropper-point point-ne" data-cropper-action="ne"></span>
      <span class="cropper-point point-nw" data-cropper-action="nw"></span>
      <span class="cropper-point point-sw" data-cropper-action="sw"></span>
      <span class="cropper-point point-se" data-cropper-action="se"></span>
    </div>
  </div>
`;var a=n.querySelector(".".concat(x,"-container")),r=a.querySelector(".".concat(x,"-canvas")),o=a.querySelector(".".concat(x,"-drag-box")),h=a.querySelector(".".concat(x,"-crop-box")),c=h.querySelector(".".concat(x,"-face"));this.container=i,this.cropper=a,this.canvas=r,this.dragBox=o,this.cropBox=h,this.viewBox=a.querySelector(".".concat(x,"-view-box")),this.face=c,_(t,E),_(h,E),e.guides||_(h.getElementsByClassName("".concat(x,"-dashed")),E),e.center||_(h.getElementsByClassName("".concat(x,"-center")),E),e.background&&_(a,"".concat(x,"-bg")),e.highlight||_(c,Ye),e.cropBoxMovable&&(_(c,Xe),Xt(c,Yt,Le)),e.cropBoxResizable||(_(h.getElementsByClassName("".concat(x,"-line")),E),_(h.getElementsByClassName("".concat(x,"-point")),E)),i.insertBefore(a,t.nextSibling),this.initContainer(),this.ready=!0,this.onReady(),this.setDragMode()}}}],mounted:function(){this.element=document.getElementById("element"),this.builder(),this.loadImage()},methods:{loadImage:function(t){var e=this.element;e.cropper=this,this.isImg=!0;var i=t||e.getAttribute("src");this.originalUrl=i,i&&this.load(i)},load:function(t){var e=this;if(t){this.url=t,this.imageData={};var i=this.element,n=this.$props;if(n.rotatable||n.scalable||(this.checkOrientation=!1),this.checkOrientation&&window.ArrayBuffer)if(Gn.test(t))Jn.test(t)?this.read((a=t.replace(ca,""),r=atob(a),o=new ArrayBuffer(r.length),N(h=new Uint8Array(o),function(l,u){h[u]=r.charCodeAt(u)}),o)):this.clone();else{var a,r,o,h,c=new XMLHttpRequest,s=this.clone.bind(this);this.reloading=!0,this.xhr=c,c.onabort=s,c.onerror=s,c.ontimeout=s,c.onprogress=function(){c.getResponseHeader("content-type")!==Qn&&c.abort()},c.onload=function(){e.read(c.response)},c.onloadend=function(){e.reloading=!1,e.xhr=null},this.checkCrossOrigin&&un(t)&&i.crossOrigin&&(t=pn(t)),c.open("GET",t,!0),c.responseType="arraybuffer",c.withCredentials=i.crossOrigin==="use-credentials",c.send()}else this.clone()}},read:function(t){var e=this.$props,i=this.imageData,n=function(c){var s,l=new DataView(c);try{var u,p,g;if(l.getUint8(0)===255&&l.getUint8(1)===216)for(var v=l.byteLength,m=2;m+1<v;){if(l.getUint8(m)===255&&l.getUint8(m+1)===225){p=m;break}m+=1}if(p){var f=p+10;if(function(C,O,$){var L="";$+=O;for(var z=O;z<$;z+=1)L+=dn(C.getUint8(z));return L}(l,p+4,4)==="Exif"){var b=l.getUint16(f);if(((u=b===18761)||b===19789)&&l.getUint16(f+2,u)===42){var D=l.getUint32(f+4,u);D>=8&&(g=f+D)}}}if(g){var w,T,d=l.getUint16(g,u);for(T=0;T<d;T+=1)if(w=g+12*T+2,l.getUint16(w,u)===274){w+=8,s=l.getUint16(w,u),l.setUint16(w,1,u);break}}}catch{s=1}return s}(t),a=0,r=1,o=1;if(n>1){this.url=function(c,s){for(var l=[],u=new Uint8Array(c);u.length>0;)l.push(dn.apply(null,sn(u.subarray(0,8192)))),u=u.subarray(8192);return"data:".concat("image/jpeg",";base64,").concat(btoa(l.join("")))}(t);var h=function(c){var s=0,l=1,u=1;switch(c){case 2:l=-1;break;case 3:s=-180;break;case 4:u=-1;break;case 5:s=90,u=-1;break;case 6:s=90;break;case 7:s=90,l=-1;break;case 8:s=-90}return{rotate:s,scaleX:l,scaleY:u}}(n);a=h.rotate,r=h.scaleX,o=h.scaleY}e.rotatable&&(i.rotate=a),e.scalable&&(i.scaleX=r,i.scaleY=o),this.clone()},clone:function(){var t=this.element,e=this.url,i=t.crossOrigin,n=e;this.checkCrossOrigin&&un(e)&&(i||(i="anonymous"),n=pn(e)),this.crossOrigin=i,this.crossOriginUrl=n;var a=document.createElement("img");this.image=a,i&&(a.crossOrigin=i),a.src=n||e,a.alt=t.alt||"The image to crop",a.onload=this.start.bind(this),a.onerror=this.stop.bind(this),_(a,Kn),t.parentNode.insertBefore(a,t.nextSibling)},start:function(){var t=this;return new Promise(function(e){var i=t.image;i.onload=null,i.onerror=null,t.sizing=!0;var n=Z.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(Z.navigator.userAgent),a=function(h,c){M(t.imageData,{naturalWidth:h,naturalHeight:c,aspectRatio:h/c}),t.initialImageData=M({},t.imageData),t.sizing=!1,t.sized=!0,t.build(),e()};if(!i.naturalWidth||n){var r=document.createElement("img"),o=document.body||document.documentElement;t.sizingImage=r,r.onload=function(){a(r.width,r.height),n||o.removeChild(r)},r.src=i.src,n||(r.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",o.appendChild(r))}else a(i.naturalWidth,i.naturalHeight)})},build:function(){if(this.sized){var t=this.$props;this.initPreview(),this.bind(),A(this.image,E),this.canvas.appendChild(this.image),this.render(),this.setDragMode(),this.autoCrop&&this.crop(),this.setData(t.data)}},stop:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null},unbuild:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),A(this.element,E))},uncreate:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}},F(Ft)?{setup:Ft,name:Ft.name}:Ft);var Ft,ga="1.1.1";const ma=fn;return tt})()})})(_n);var _a=_n.exports;const Ba=Da(_a),Sa={class:"mc-cropper"},Bn=ya({__name:"McCropper",props:{imgSrc:{type:String,default:null}},emits:["crop","ready"],setup(J,{emit:ni}){const U=ni,tt=J,Nt=xn(null),Tt=xn(null);ba(()=>tt.imgSrc,Y=>{Rt(Y)});const Rt=Y=>{Nt.value.replace(tt.imgSrc||Y)},me=Y=>{Kt(),Tt.value=setTimeout(Y,200)},ve=Y=>{var R,et;(et=(R=Y.target)==null?void 0:R.cropper)==null||et.getCroppedCanvas({maxWidth:650,maxHeight:650}).toBlob(ye=>{U("crop",ye)}),Kt()},Kt=()=>{Tt.value&&clearTimeout(Tt.value)};return(Y,R)=>(wa(),xa("section",Sa,[Ca(Ma(Ba),{ref_key:"cropper",ref:Nt,background:"",alt:"Avatar","aspect-ratio":1/1,"initial-aspect-ratio":1/1,highlight:!1,guides:!1,zoomable:!1,"view-mode":2,src:J.imgSrc,onReady:R[0]||(R[0]=et=>U("ready",et)),onCrop:R[1]||(R[1]=et=>me(()=>ve(et)))},null,8,["src"])]))}});Bn.__docgenInfo={exportName:"default",displayName:"McCropper",description:"",tags:{},props:[{name:"imgSrc",description:"  ",type:{name:"string"},defaultValue:{func:!1,value:"null"}}],events:[{name:"crop"},{name:"ready"}],sourceFiles:["/Users/user/Documents/work/mediacube-ui-v2/src/components/elements/McCropper/McCropper.vue"]};const Ta={title:"McCropper",component:Bn,tags:["autodocs"],argTypes:{},args:{imgSrc:"https://avatars.githubusercontent.com/u/63395408?s=400&u=5f3ae555700cfcacf278425bf37c1433c3ed43c1&v=4",onReady:wn(J=>{console.log(J)}),onCrop:wn(J=>{console.log(J)})},parameters:{componentSubtitle:"Status: Ready",design:{type:"figma"}}},ge={args:{}};var Cn,Mn,Dn;ge.parameters={...ge.parameters,docs:{...(Cn=ge.parameters)==null?void 0:Cn.docs,source:{originalSource:`{
  args: {}
}`,...(Dn=(Mn=ge.parameters)==null?void 0:Mn.docs)==null?void 0:Dn.source}}};const Ra=["Default"];export{ge as Default,Ra as __namedExportsOrder,Ta as default};
