import{p as j,f as z,r as S,e as F,S as A,w as k,q as c,v as m,F as u,G as b,Q as E,M as O,B as d,C as q,T as G,K as w,L as $,A as _,x as H,P as x,u as K,n as P}from"./vue.esm-bundler-DcuF_pQ3.js";import{_ as Q}from"./McTitle-BRys2FLH.js";import{_ as C}from"./McSideBarButton-DtgN5QRv.js";import{_ as U}from"./McSeparator-DNYl-E5K.js";import{a as J,_ as W}from"./McButton-Cw3_qabT.js";import{_ as X}from"./McSvgIcon-Cq4_nq1C.js";import{b as Y}from"./useTooltip-C3VtZaBe.js";import{u as Z}from"./vue-router-XxfYOQaO.js";import{d as R,S as M}from"./sidebar-_fboGCRM.js";import{_ as I}from"./McSlideUpDown-CguhuDbm.js";const ee={class:"mc-side-bar-center"},te={key:1,class:"mc-side-bar-center__content"},ae=j({__name:"McSideBarCenter",props:{title:{type:String,default:""},menuMain:{type:Array,default:()=>[]},counts:{type:Object,default:()=>({})},chatraConfig:{type:Object,default:null},compact:{type:Boolean,default:!1}},emits:["open-side-bar","handlerChatraClick"],setup(o,{emit:V}){const i=Z(),N=Y(),T=z("provideData",{}),g=V,r=o,f=S(!0),s=S([]),p=F(()=>T.currentThemeConfig||R[M.Black]);A(()=>{v()}),k(()=>r.menuMain,()=>{v()},{deep:!0}),k(()=>r.compact,()=>{v()}),k(()=>i,(t,l)=>{if(f.value=!0,l.path!==t.path){const e=s.value.find(a=>{var n;return a.to.name===t.name||((n=a.menu)==null?void 0:n.find(h=>h.to.name===t.name))});e!=null&&e.menu&&!r.compact&&(e.open=!0)}P(()=>{s.value.forEach(e=>{const a=e.to.name===t.name,n=e.menu&&e.menu.some(h=>{var y,B;return((y=h.to.name)==null?void 0:y.match(t==null?void 0:t.name))||((B=t.name)==null?void 0:B.match(h.to.name))});a||n||(e.open=!1)}),f.value=!1})});const D=t=>({open:t.open,active:t.active(),"with-submenu":t.menu&&t.menu.length,[`mc-side-bar--${p.value.mode||"black"}__button`]:!0,"purple-hover":p.value.mainMenuLinks.variable==="black-flat",[`mc-button--variation-${p.value.mainMenuLinks.variable}`]:!!p.value.mainMenuLinks.variable,"mc-side-bar--black__button mc-button nuxt-link-active":t.menu&&t.menu.length&&!t.open&&t.active()}),L=()=>{r.compact&&g("open-side-bar")},v=()=>{f.value=!0,s.value=r.menuMain.map(t=>{const l=()=>{var e;return t.menu&&t.menu.some(a=>{var n;return(n=i==null?void 0:i.name)==null?void 0:n.match(a.to.name)})||!!((e=i==null?void 0:i.name)!=null&&e.match(t.to.name))};return{id:N.timestamp(5),...t,active:l,indicator:()=>t.menu&&t.menu.some(e=>{var a;return!!((a=r.counts)!=null&&a[e.count_key])}),open:!r.compact&&l()}}),f.value=!1};return(t,l)=>(c(),m("div",ee,[o.title?(c(),u(Q,{key:0,class:"mc-side-bar-center__title",color:o.compact?"transparent":"dark-gray"},{default:b(()=>[E(O(o.title),1)]),_:1},8,["color"])):d("",!0),s.value&&s.value.length?q((c(),m("div",te,[(c(!0),m(w,null,$(s.value,e=>(c(),m("div",{key:e.id,class:_([{"item-active":e.active()},"mc-side-bar-center__content-item item"])},[H("div",{class:_(["item__head",D(e)]),onClick:L},[x(C,{info:e.menu&&e.menu.length?null:e.info||r.counts[e.count_key]||null,href:e.href,to:e.to,icon:e.icon,"icon-color":e.iconColor,title:e.name,compact:o.compact,"is-active":e.active(),"with-submenu":e.menu&&!!e.menu.length,"with-indicator":e.indicator()&&!e.open,"with-tooltip":"",class:"item__head-button--no-hover"},null,8,["info","href","to","icon","icon-color","title","compact","is-active","with-submenu","with-indicator"]),e.menu&&e.menu.length&&!o.compact?(c(),u(W,{key:0,variation:e.active()?"white-link":"gray-link",size:K(J).MCompact,class:_(["item__head-arrow",{rotate:e.active()?e.active()&&e.open:e.open}]),onClick:a=>e.open=!e.open},{"icon-prepend":b(()=>[x(X,{name:"arrow_forward"})]),_:2},1032,["variation","size","class","onClick"])):d("",!0)],2),e.menu&&e.menu.length?(c(),u(I,{key:0,class:"item__submenu",active:e.active()?e.active()&&e.open:e.open},{default:b(()=>[(c(!0),m(w,null,$(e.menu,(a,n)=>(c(),u(C,{key:n,info:o.counts[a.count_key],href:a.href,to:a.to,icon:a.icon,"icon-color":a.iconColor,title:a.name,compact:o.compact,"with-tooltip":""},null,8,["info","href","to","icon","icon-color","title","compact"]))),128))]),_:2},1032,["active"])):d("",!0)],2))),128))],512)),[[G,!f.value]]):d("",!0),o.chatraConfig?(c(),u(U,{key:2,color:"dark-gray","indent-top":"150","indent-bottom":"150","indent-left":o.compact?"0":"100","indent-right":o.compact?"0":"100"},null,8,["indent-left","indent-right"])):d("",!0),o.chatraConfig?(c(),u(C,{key:3,icon:"chat_messages",title:o.chatraConfig.title,compact:o.compact,"with-tooltip":"",onClick:l[0]||(l[0]=e=>g("handlerChatraClick"))},null,8,["title","compact"])):d("",!0)]))}});ae.__docgenInfo={exportName:"default",displayName:"McSideBarCenter",description:"",tags:{},props:[{name:"title",description:"Заголовок",type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"menuMain",description:"Центральное меню",type:{name:"ISideBarMenuItem[]"},defaultValue:{func:!0,value:"() => []"}},{name:"counts",description:`Каунты для пунктов меню
 вставляются в пункты с ключем 'count_key'`,type:{name:"Record<string, number | null>"},defaultValue:{func:!0,value:"() => ({})"}},{name:"chatraConfig",description:"Id чатры",type:{name:"object"},defaultValue:{func:!1,value:"null"}},{name:"compact",description:"Компактный вид",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}}],events:[{name:"open-side-bar"},{name:"handlerChatraClick"}],sourceFiles:["/Users/user/Documents/work/mediacube-ui-v2/src/components/patterns/McSideBar/McSideBarCenter/McSideBarCenter.vue"]};export{ae as _};
