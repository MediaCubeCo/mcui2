import{p as $,e as b,q as m,v as f,y as v,E as P,r as i,o as F,D as R,w as S,x as B,O as T,N as I,P as K,G as q,A as G,K as j,L as J,n as Q}from"./vue.esm-bundler-DcuF_pQ3.js";import{u as X}from"./vue-router-XxfYOQaO.js";import{f as Y}from"./index-DRQZTcpU.js";var l=(t=>(t.Top="top",t.Bottom="bottom",t.Auto="auto",t))(l||{}),r=(t=>(t.Left="left",t.Right="right",t.Auto="auto",t))(r||{});const N=$({__name:"McDropdownPanel",props:{maxHeight:{type:Number,default:300}},setup(t){const w=t,h=b(()=>({"--panel-max-height":`${w.maxHeight}px`}));return(s,d)=>(m(),f("section",{class:"mc-dropdown-panel",style:P(h.value)},[v(s.$slots,"default")],4))}});N.__docgenInfo={exportName:"default",displayName:"McDropdownPanel",description:"",tags:{},props:[{name:"maxHeight",type:{name:"number"},defaultValue:{func:!1,value:"300"}}],slots:[{name:"default",description:"Слот контента"}],sourceFiles:["/Users/user/Documents/work/mediacube-ui-v2/src/components/patterns/McDropdown/McDropdownPanel.vue"]};const Z=["onClick"],C="dropdown-element-id",ee=$({__name:"McDropdown",props:{modelValue:{type:Boolean,default:!1},items:{type:Array,default:()=>[]},position:{type:String,default:r.Left},listPosition:{type:String,default:l.Bottom},listMinWidth:{type:String,default:"inherit"},listMaxHeight:{type:Number,default:300},hideOnSelect:{type:Boolean,default:!0}},emits:["update:modelValue","select"],setup(t,{emit:w}){const h=Y(e=>{e()},200),s=i(null),d=i(null),y=i(null),k=i(null),n=i(!1),E=X(),D=w,o=t,H=b(()=>({[`mc-dropdown--position-${d.value}`]:!!d.value,[`mc-dropdown--list-position-${s.value}`]:!!s.value,"mc-dropdown--is-open":n.value})),A=b(()=>({"--dropdown-body-min-width":o.listMinWidth}));F(()=>{window.addEventListener("resize",c),window.addEventListener("transitionrun",c)}),R(()=>{window.removeEventListener("resize",c),window.removeEventListener("transitionrun",c)});const O=()=>{g(!n.value)},M=e=>{const p=e.target;n.value&&!p.closest(`#${C}`)&&u()},u=()=>{g(!1)},g=e=>{n.value=e,D("update:modelValue",e),n.value?document.addEventListener("click",M):document.removeEventListener("click",M)},U=e=>{D("select",e),o.hideOnSelect&&u()},V=()=>{var L;if(!y.value)return;const e=(L=k.value)==null?void 0:L.getBoundingClientRect();if(!e)return;const p=window.innerHeight-e.bottom,a=window.innerWidth-e.left,{offsetHeight:_,offsetWidth:x}=y.value,W=p<_?l.Top:l.Bottom,z=a>x?r.Left:r.Right;s.value=o.listPosition===l.Auto?W:o.listPosition,d.value=o.position===r.Auto?z:o.position},c=()=>h(()=>V());return S(()=>E,u),S(()=>o.modelValue,e=>{n.value!==e&&g(e),Q(()=>{V()})},{immediate:!0}),(e,p)=>(m(),f("div",{class:G(["mc-dropdown",H.value]),id:C,style:P(A.value)},[B("div",{class:"mc-dropdown__toggle",ref_key:"activator",ref:k,tabindex:"0",onKeyup:T(u,["esc"]),onClick:I(O,["prevent","stop"])},[v(e.$slots,"activator")],544),B("div",{ref_key:"dropdown_body",ref:y,class:"mc-dropdown__body"},[K(N,{"max-height":t.listMaxHeight},{default:q(()=>[v(e.$slots,"default",{},()=>[(m(!0),f(j,null,J(t.items,(a,_)=>(m(),f("div",{key:`dropdown-list-item-${a.id||a.key||_}`,class:"mc-dropdown-panel__item",onClick:x=>U(a)},[v(e.$slots,"item",{item:a})],8,Z))),128))])]),_:3},8,["max-height"])],512)],6))}});ee.__docgenInfo={exportName:"default",displayName:"McDropdown",description:"",tags:{},props:[{name:"modelValue",description:"Состояние видимости контента",type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"items",type:{name:"any[]"},defaultValue:{func:!0,value:"() => []"}},{name:"position",description:`Выравнивание
контента: 'left', 'right', 'auto'`,type:{name:"String as () => DropdownPositionsUnion"},defaultValue:{func:!1,value:"DropdownPositions.Left"}},{name:"listPosition",description:`Направление отображения
контента: 'top', 'bottom', 'auto'`,type:{name:"String as () => DropdownListPositionsUnion"},defaultValue:{func:!1,value:"DropdownListPositions.Bottom"}},{name:"listMinWidth",description:"Минимальная ширина выпадаюзего списка",type:{name:"string"},defaultValue:{func:!1,value:"'inherit'"}},{name:"listMaxHeight",description:"Минимальная ширина выпадаюзего списка",type:{name:"number"},defaultValue:{func:!1,value:"300"}},{name:"hideOnSelect",type:{name:"boolean"},defaultValue:{func:!1,value:"true"}}],events:[{name:"update:modelValue",type:{names:["boolean"]}},{name:"select",type:{names:["any"]}}],slots:[{name:"activator",description:"активатора переключения состояния"},{name:"default"},{name:"item",scoped:!0,bindings:[{name:"item",title:"binding"}]}],sourceFiles:["/Users/user/Documents/work/mediacube-ui-v2/src/components/patterns/McDropdown/McDropdown.vue"]};export{l as D,ee as _,r as a};
